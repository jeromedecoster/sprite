/*! Sprite v0.0.1 | github.com/jeromedecoster/sprite */
function Sprite(i){this.check(i,"src","width","height","el"),this.src=i.src,this.width=i.width,this.height=i.height,this.delay=i.delay||60,this.waitStart=i.waitStart||0,this.waitEnd=i.waitEnd||0,~["loop","yoyo"].indexOf(i.motion)&&(this.motion=i.motion),i.el.style.width=this.width+"px",i.el.style.height=this.height+"px","canvas"==i.el.nodeName.toLowerCase()?(this.canvas=!0,i.el.width=this.width,i.el.height=this.height,this.el=i.el.getContext("2d")):this.el=i.el,this.loaded=!1,this.img=new Image,this.img.src=i.src;var t=this;this.img.onload=function(){this.height>this.width?(t.frames=this.height/t.height-1,t.vertical=!0):(t.frames=this.width/t.width-1,t.vertical=!1),t.canvas||(t.el.style.backgroundImage="url("+t.src+")"),t.frame=t.clamp(i.frame||0),t.draw(),t.loaded=!0,t.cb&&(t.cb[0].apply(t,t.cb.splice(1)),t.cb=void 0)}}Sprite.prototype={play:function(){return this.loaded?void(1!=this.direction&&(void 0==this.interval||"yoyo"!=this.motion)&&(this.clear(),this.direction=1,this.animate())):this.cb=[this.play]},rewind:function(){return this.loaded?void(-1!=this.direction&&void 0==this.motion&&0!=this.frame&&(this.clear(),this.direction=-1,this.animate())):this.cb=[this.rewind]},stop:function(i,t){return this.loaded?void(t!==!0||void 0==this.interval&&void 0==this.timeout?(this.clear(),void 0!=i&&(this.frame=this.clamp(i),this.draw())):this.finish=this.clamp(i)):this.cb=[this.stop,i,t]},check:function(i){for(var t=1,h=arguments.length;h>t;t++)if(void 0==i[arguments[t]])throw new Error("Sprite param `"+arguments[t]+"` required")},draw:function(){this.canvas?(this.el.clearRect(0,0,this.width,this.height),this.vertical?this.el.drawImage(this.img,0,0+this.height*this.frame,this.width,this.height,0,0,this.width,this.height):this.el.drawImage(this.img,0+this.width*this.frame,0,this.width,this.height,0,0,this.width,this.height)):this.el.style.backgroundPosition=this.vertical?"0px "+-this.height*this.frame+"px":-this.width*this.frame+"px 0px"},update:function(){var i=this;this.direction>0?(this.frame+=1,"yoyo"==this.motion?this.frame>this.frames?(this.direction=-1,this.frame=this.frames-1):this.frame==this.frames&&(this.direction=-1,this.waitEnd>0&&(this.clear(!0),this.timeout=setTimeout(function(){i.animate()},this.waitEnd))):"loop"==this.motion?this.frame>this.frames?this.frame=0:this.frame==this.frames&&this.waitEnd>0&&(this.clear(!0),setTimeout(function(){i.animate()},this.waitEnd)):this.frame>this.frames?this.frame=0:this.frame==this.frames&&this.clear(),this.draw()):this.direction<0&&(this.frame-=1,"yoyo"==this.motion?0==this.frame&&(this.direction=1,this.waitStart>0&&(this.clear(!0),this.timeout=setTimeout(function(){i.animate()},this.waitStart))):void 0==this.motion&&0==this.frame&&this.clear(),this.draw()),void 0!=this.finish&&this.finish==this.frame&&(this.finish=void 0,this.clear())},clear:function(i){clearInterval(this.interval),clearTimeout(this.timeout),this.interval=void 0,this.timeout=void 0,i!==!0&&(this.direction=void 0)},clamp:function(i){return Math.max(0,Math.min(this.frames,i))},animate:function(){var i=this;this.interval=setInterval(function(){i.update()},this.delay)}};